# **Модуль векторизации идей из очереди *Queue Idea Handler***
## Описание работы модуля

Модуль читает глобальную очередь и при создании/изменении объектов класса ***mnd-s:Idea*** отправляет соответствующие текстовые поля в модуль ***LLM*** для получения актуального эмбеддинга. Из полученных от ***LLM*** эмбеддингов формирует объект, описывающий идею в виде векторов. Далее этот объект связывается с идеей через поле ***mnd-s:hasEmbeddings***, сохраняется в системе ***Optiflow***.

Список векторизуемых полей:

- ***v-s:title*** — название идеи;
- ***v-s:actualState*** — текущее состояние (процесса, обстановки на производстве);
- ***v-s:description*** — предлагаемое решение проблемы/улучшение.

### Входные данные

В идеях, из которых берутся текстовые поля, данные хранятся в виде следующих объектов:

```json
d:idea_1
  rdf:type mnd-s:Idea ;
  v-s:title "Название идеи" ;
  v-s:actualState "Текст, описывающий текущую ситуацию на производстве" ;
  v-s:description "Текст, описывающий предлагаемую инновацию" ;
    ...
  .
```

### Выходные данные

Модуль упаковывает полученные от ***LLM*** эмбеддинги для соответствующей идеи в объект (обновляет в случае изменения полей идеи, иначе создаёт новый) и добавляет их в систему ***Optiflow***:

```json
  d:emb_123
    rdf:type v-s:Embeddings ;
    v-s:hasEmbedding d:emb_element_1 ;
    v-s:hasEmbedding d:emb_element_2 ;
    v-s:hasEmbedding d:emb_element_3 ;
  .  

  d:emb_element_1
    rdf:type v-s:Embedding ;
    v-s:associatesWith v-s:title ;
    v-s:data "0.123, -0.456, 0.789" ;
  .      
  
  d:emb_element_2
    rdf:type v-s:Embedding ;
    v-s:associatesWith v-s:actualState ;
    v-s:data "0.134, 0.476, -0.795" ;
  .
  
  d:emb_element_3
    rdf:type v-s:Embedding ;
    v-s:associatesWith v-s:description ;
    v-s:data "0.987, -0.654, 0.321" ;
  .
```
