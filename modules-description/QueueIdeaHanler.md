# **Модуль векторизации идей из очереди *Queue Idea Handler***
## Описание работы модуля

Модуль читает глобальную очередь и при создании/изменении объектов класса ***mnd-s:Idea*** отправляет соответствующие текстовые поля в модуль ***LLM*** для получения актуального эмбеддинга. Из полученных от ***LLM*** эмбеддингов формирует объект, описывающий идею в виде векторов. Далее этот объект связывается с идеей через поле ***mnd-s:hasEmbeddings***, сохраняется в системе ***Optiflow***.

Список векторизуемых полей:

- ***v-s:title*** — название идеи;
- ***v-s:actualState*** — текущее состояние (процесса, обстановки на производстве);
- ***v-s:description*** — предлагаемое решение проблемы/улучшение.

### Входные данные

В идеях, из которых берутся текстовые поля, данные хранятся в виде следующих объектов:

```json
{
    ...
    "v-s:title": [
    {
      "data": "Название идеи",
      "type": "String"
    }
  ],
    ...
  "v-s:actualState": [
    {
      "data": "Текст, описывающий текущую ситуацию на производстве",
      "type": "String"
    }
  ],
    ...
  "v-s:description": [
    {
      "data": "Текст, описывающий предлагаемую инновацию",
      "type": "String"
    }
  ]
    ...
}
```

### Выходные данные

Модуль упаковывает полученные от ***LLM*** эмбеддинги для соответствующей идеи в объект (обновляет в случае изменения полей идеи, иначе создаёт новый) и добавляет их в систему ***Optiflow***:

```json
{
  "@": "*id объекта*",
  "rdf:type": [
    {
      "data": "mnd-s:IdeaAsVector",
      "type": "Uri"
    }
  ],
  "mnd-s:IdeaNameEmbedding": [
    {
      "data": "0.123, -0.456, 0.789",
      "type": "String"
    }
  ],
"mnd-s:IdeaStateEmbedding": [
    {
      "data": "0.543, -0.678, 0.712",
      "type": "String"
    }
  ],
  "mnd-s:IdeaInnovationEmbedding": [
    {
      "data": "0.987, -0.654, 0.321",
      "type": "String"
    }
  ],
  "v-s:updateCounter": [
    {
      "data": 6,
      "type": "Integer"
    }
  ],
  "mnd-s:hasIdea": [
    {
      "data": "*id материнской идеи*",
      "type": "Uri"
    }
  ]
}
```
